{{- $isHome          := .IsHome }}
{{- $isSpirePage     := eq .Section "spire" }}
{{- $isDownloadsPage := eq .Section "downloads" }}
{{- $spiffeLogo      := "/img/logos/spiffe/horizontal/color/spiffe-horizontal-color.png" | relURL }}
{{- $spireLogo       := "/img/logos/spire/horizontal/color/spire-horizontal-color.png" | relURL }}
{{- $logoUrl         := cond $isSpirePage $spireLogo $spiffeLogo }}
{{- $social          := .Site.Params.socialmedia }}
{{- $twitterUrl      := printf "https://twitter.com/%s" $social.twitter }}
{{- $slackUrl        := $social.slack }}
{{- $blogUrl         := $social.medium }}
{{- $githubUrl       := $social.github }}
{{- $stackUrl        := $social.stackoverflow }}
{{- $youtubeUrl      := $social.youtube }}
<nav class="navbar is-fixed-top is-light">
  <div class="container">
    <div class="navbar-brand">
      {{- if not $isHome }}
      <a class="navbar-item" href="{{ .Site.BaseURL }}">
        <img src="{{ $logoUrl }}">
      </a>
      {{- end }}

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu">

      <div class="navbar-end">

      <div class="navbar-item has-dropdown is-hoverable has-text-weight-bold">
        <a class="navbar-link" href="/spiffe">
          About SPIFFE
        </a>
        <div class="navbar-dropdown">
            {{- range .Site.Menus.spiffe }}
              {{- if .HasChildren }}
                <a class="navbar-item" href="{{ .URL }}">
                  <span>{{ .Title }}</span>
                </a>
                {{- range .Children }}
                  <a class="navbar-item navbar-item-sub" href="{{ .URL }}">
                    {{ .Title }}
                  </a>
                {{- end }}
              {{- else }}
                <a class="navbar-item" href="{{ .URL }}">
                  <span>{{ .Title }}</span>
                </a>
              {{- end }}
            {{- end }}
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable has-text-weight-bold">
          <a class="navbar-link" href="/spire">
            About SPIRE
          </a>

          <div class="navbar-dropdown">
            {{- range .Site.Menus.spire }}
              {{- if .HasChildren }}
                <a class="navbar-item" href="{{ .URL }}">
                  <span>{{ .Title }}</span>
                </a>
                {{- range .Children }}
                  <a class="navbar-item navbar-item-sub" href="{{ .URL }}">
                    &raquo;	  {{ .Title }}
                  </a>
                {{- end }}
              {{- else }}
                <a class="navbar-item" href="{{ .URL }}">
                  <span>{{ .Title }}</span>
                </a>
              {{- end }}
            {{- end }}
          </div>
        </div>

        <a class="navbar-item has-text-weight-bold" href="/downloads">
          Get SPIRE
        </a>

        <div class="navbar-item has-dropdown is-hoverable has-text-weight-bold">
          <a class="navbar-link" href="/community">
            Community
          </a>

          <div class="navbar-dropdown">
              {{- range .Site.Menus.community }}
                {{- if .HasChildren }}
                  <a class="navbar-item" href="{{ .URL }}">
                    <span>{{ .Title }}</span>
                  </a>
                  {{- range .Children }}
                    <a class="navbar-item navbar-item-sub" href="{{ .URL }}">
                      {{ .Title }}
                    </a>
                  {{- end }}
                {{- else }}
                  <a class="navbar-item" href="{{ .URL }}">
                    <span>{{ .Title }}</span>
                  </a>
                {{- end }}
              {{- end }}
            </div>
          </div>
        </div>

        <div class="navbar-item">
          <p class="control">
            <a class="button is-black" href="{{ $blogUrl }}">
              <span class="icon">
                <i class="fab fa-medium"></i>
              </span>
              <span>
                Blog
              </span>
            </a>

            <a class="button is-twitter-blue" href="{{ $twitterUrl }}">
              <span class="icon">
                <i class="fab fa-twitter"></i>
              </span>
            </a>

            <a class="button is-black" href="{{ $githubUrl }}">
              <span class="icon">
                <i class="fab fa-github"></i>
              </span>
            </a>

            <a class="button is-slack-green" href="{{ $slackUrl }}">
              <span class="icon">
                <i class="fab fa-slack"></i>
              </span>
            </a>

            <a class="button is-stack-overflow-orange" href="{{ $stackUrl }}">
              <span class="icon">
                <i class="fab fa-stack-overflow"></i>
              </span>
            </a>

            <a class="button is-youtube-red" href="{{ $youtubeUrl }}">
              <span class="icon">
                <i class="fab fa-youtube"></i>
              </span>
            </a>
          </p>
        </div>
      </div>
    </div>
  </div>
</nav>
